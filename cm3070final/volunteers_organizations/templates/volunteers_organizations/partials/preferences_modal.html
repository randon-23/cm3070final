<!-- Event listener included here and not in event-listeners.js because event-listeners is loaded on every page, whislt this evetn listener is exclusively for profile.html page-->
<script> 
    document.addEventListener("DOMContentLoaded", function() {
        setTimeout(function() {
            document.getElementById("preferences-modal").classList.remove("hidden");
            document.getElementById("preferences-modal").classList.add("flex");
        }, 1500);
    });
</script>

<div id="preferences-modal" class="fixed inset-0 items-center justify-center bg-black bg-opacity-50 hidden">
    <div class="bg-white p-8 rounded-lg shadow-lg w-4/5 max-w-4xl max-h-[80vh] overflow-y-auto">
        <!-- Modal Header -->
        <div class="flex justify-center relative mb-4">
            <h2 class="text-2xl font-bold mx-auto">Set Your Preferences</h2>
            <button onclick="document.getElementById('preferences-modal').classList.add('hidden')" class="absolute right-0 text-gray-500 hover:text-gray-700">
                âœ•
            </button>
        </div>

        <!-- Separator -->
        <div class="w-3/4 mx-auto h-[1px] bg-gray-300 my-4"></div>

        <form id="preferences-form" method="post" 
              hx-post="{% url 'volunteers_organizations:create_preferences' %}" 
              hx-target="#modal-container" hx-swap="innerHTML"
              class="space-y-6">
            
            <!-- Availability -->
            <label class="block text-gray-700 font-semibold">Availability (Days of the Week)</label>
            <div class="grid grid-cols-4 gap-4">
                {% for day in days_of_week %}
                    <label class="flex items-center space-x-2">
                        <input type="checkbox" name="availability" value="{{ day }}" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded-sm focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                        <span class="text-gray-800">{{ day|title }}</span>
                    </label>
                {% endfor %}
            </div>

            <!-- Separator -->
            <div class="w-3/4 mx-auto h-[1px] bg-gray-300 my-4"></div>

            <!-- Preferred Work Type -->
            <label class="block text-gray-700 font-semibold">Preferred Work Type</label>
            <select name="preferred_work_types" class="w-full border rounded p-2">
                {% for type in work_types %}
                    <option value="{{ type }}">{{ type|title }}</option>
                {% endfor %}
            </select>

            <!-- Separator -->
            <div class="w-3/4 mx-auto h-[1px] bg-gray-300 my-4"></div>

            <!-- Preferred Duration -->
            <label class="block text-gray-700 font-semibold">Preferred Duration</label>
            <div class="grid grid-cols-3 gap-4">
                {% for duration in durations %}
                    <label class="flex items-center space-x-2">
                        <input type="checkbox" name="preferred_duration" value="{{ duration }}" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded-sm focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                        <span class="text-gray-800">{{ duration|title }}</span>
                    </label>
                {% endfor %}
            </div>

            <!-- Separator -->
            <div class="w-3/4 mx-auto h-[1px] bg-gray-300 my-4"></div>

            <!-- Fields of Interest -->
            <label class="block text-gray-700 font-semibold">Fields of Interest (Max 5)</label>
            <div class="grid grid-cols-3 gap-4">
                {% for field in fields_of_interest %}
                    <label class="flex items-center space-x-2">
                        <input type="checkbox" name="fields_of_interest" value="{{ field }}" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded-sm focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                        <span class="text-gray-800">{{ field|title }}</span>
                    </label>
                {% endfor %}
            </div>

            <!-- Separator -->
            <div class="w-3/4 mx-auto h-[1px] bg-gray-300 my-4"></div>

            <!-- Skills -->
            <label class="block text-gray-700 font-semibold">Skills (Max 10)</label>
            <div class="grid grid-cols-4 gap-4">
                {% for skill in skills %}
                    <label class="flex items-center space-x-2">
                        <input type="checkbox" name="skills" value="{{ skill }}" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded-sm focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                        <span class="text-gray-800">{{ skill|title }}</span>
                    </label>
                {% endfor %}
            </div>

            <!-- Buttons -->
            <div class="flex justify-between mt-6">
                <button type="button" onclick="document.getElementById('preferences-modal').classList.add('hidden')" class="bg-gray-700 text-white px-6 py-2 rounded-md flex items-center space-x-4 hover:bg-gray-600">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M3 8.689c0-.864.933-1.406 1.683-.977l7.108 4.061a1.125 1.125 0 0 1 0 1.954l-7.108 4.061A1.125 1.125 0 0 1 3 16.811V8.69ZM12.75 8.689c0-.864.933-1.406 1.683-.977l7.108 4.061a1.125 1.125 0 0 1 0 1.954l-7.108 4.061a1.125 1.125 0 0 1-1.683-.977V8.69Z" />
                    </svg>
                    <span class="font-bold">Skip for now</span>          
                </button>
                <button type="submit" class="bg-blue-600 text-white px-6 py-2 rounded-md flex items-center space-x-4 hover:bg-blue-700">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0 1 11.186 0Z" />
                    </svg>
                    <span class="font-bold">Save Preferences</span>
                </button>
            </div>
        </form>
    </div>
</div>